[{"title":"chat靶机","url":"/2025/09/28/chat靶机/","content":"\n# chat靶机\n\n## 端口信息\n\n![1](1.png)\n\n主要是22 2222 8000端口\n\n## http\n\n![2](2.png)\n\n打开是某个用户的目录\n\n没法超越目录只能在这个目录下查看\n\n![3](3.png)\n\n.ssh里面有私钥\n\n可以尝试用私钥来免密登录\n\n公钥里面泄露了用户名称\n\n![4](4.png)\n\n## ssh chat\n\n这个端口开放的服务是一个匿名聊天室\n\n![5](5.png)\n\n用户名可以随便输入\n\n尝试多次并没有什么可以攻击的地方\n\n## ssh\n\n使用私钥来尝试ssh免密登录\n\n![6](6.png)\n\n虽然使用了私钥 但是并没有提示私钥是否正确 或者 权限问题 所以这个用户没法用私钥登录\n\n在之前的ssh chat也出现过todd\n\n可以进行尝试用todd和scycree去爆破密码\n\n![7](7.png)\n\n这里猜测todd:todd也是比较抽象（todd是群里的大佬）\n\n但是成功了\n\n![8](8.png)\n\n确实有scycree用户\n\n各自home目录下面都没有user的flag这个靶机可能只有root的flag了\n\n在scycree下面也确实有.ssh文件那么现在可以知道了，在网站里面的目录就是scycree的home目录映射出的\n\n![9](9.png)\n\n`cat /etc/ssh/sshd_config`\n\n查看有关ssh的配置文件可以知道确实scycree被ban掉了 没法用私钥直接免密登录\n\n`sudo -l`\n\n也没有什么可以用的命令\n\n那么现在只能爆破scycree的密码了\n\n![10](10.png)\n\n在本地开一个服务\n\n然后再靶机下载字典和工具\n\nsuForce是一个可以在本地去爆破密码的工具\n\nsuForce -u scycree -w 字典\n\n最后爆出来密码是welcome\n\n![11](11.png)\n\nscycree可以用ghfs命令\n\n先看看后台进程情况\n\n![12](12.png)\n\n看到这个地方就可以知道这个命令是干啥的了\n\n这个命令可以映射本地目录\n\n具体可以用法什么的可以去看看帮助手册\n\n![13](13.png)\n\n这里直接将root目录做了映射\n\n![14](14.png)\n\n这里就可以直接读root的flag了\n\n但是这里并没有登录root\n\n### 该怎么登录root呢\n\n![15](15.png)\n\n在root下面也有.ssh文件\n\n那么可以将自己的公钥部署在靶机上面实现免密登录root\n\n回到帮助手册里面\n\n![16](16.png)\n\n这一行里面可以实现文件上传\n\n`sudo ghfs -l 9000 -r /root -p /root`\n\n![17](17.png)\n\n最后只需把公钥部署在.ssh里面就可以免密登录了\n\n![18](18.png)\n\n---\n\n## 关于ssh登录机制\n\n![19](19.png)\n\n## 配置密钥与私钥\n\n生成密钥对\n\n`ssh-keygen -t rsa -b 4096 -f ~/.ssh`\n\n部署公钥\n\n`ssh-copy-id -i ~/.ssh/rsa_id.pub user@server`\n\n完成后公钥会自动添加到 `~/.ssh/authorized_keys`\n\n也可以手动配置公钥\n\n直接将公钥内容写到authorized_keys里面就可以了\n\n## 简单来说公钥就是关门的（锁） 私钥就是开门的（钥匙）\n","categories":["靶机"]},{"title":"team靶机","url":"/2025/09/28/team靶机/","content":"\n# team靶机\n\n## 端口信息\n\n![1](1.png)\n\n开了两个http分别访问一下\n\n## http\n\n![2](2.png)\n\n80端口的web服务就只是一个静态页面没有用\n\n![3](3.png)\n\n8000端口的web服务是一个登录框通过目录扫描可以扫到一个api接口目录\n\n![4](4.png)\n\n![4](5.png)\n\n经过测试 这里面的接口即使是能用的也没有什么有用的信息所以现在只能尝试爆破密码了从常见的用户名 admin root user guest test去爆破看看经过一通爆破\n\n![6](6.png)\n\n最后发现有账号root:password123\n\n![7](7.png)\n\n进去看是一个仪表盘翻了一下并没有什么可以直接getshell的点但是在密钥存储这里有点线索\n\n![8](8.png)\n\n猜测todd和ssh有关可能是账号我们直接hydra爆破一下\n\n![9](9.png)\n\n爆破出来是todd:password123找到在ll104567目录下有user.txt拿到user的flag\n\n![10](10.png)\n\n## root\n\n老规矩先看看后台进程情况\n\n![11](11.png)\n\n绝大部分都是root干的www-data只是开启了一个apache服务可以猜测如果拿到刚刚后台网站的shell就直接拿到root用户了\n\n![12](12.png)\n\n我们可以在仓库里面新建一个仓库url写入我们的github仓库然后再github指定的仓库里面写上反弹shell最后制定一个模板任务就可以反弹shell了\n\n![13](13.png)\n\n最后成功拿shell\n\n![14](14.png)\n\n## 有关web服务的启动\n\n启动web服务最好是创建一个专门的用户\n\n在这个情况下即使被拿到shell\n\n也比直接拿到root权限好\n\n做了一手防护\n","categories":["靶机"]},{"title":"使用systemd维护进程","url":"/2025/09/28/使用systemd维护进程/","content":"\n## 使用systemd维护进程\n\n使用systemd可以将服务注册为系统守护进程，使得服务可以长时间运作，断开ssh连接继续执行\n\n---\n\n创建/etc/systemd/system/服务名称.service\n\n并改写配置\n\n---\n\n[Unit]\nDescription=Hexo Image Server\nAfter=network.target\n\n[Service]\n\n### 指定工作目录\n\nWorkingDirectory=工作路径(在哪里启动)\n\n### 使用普通用户\n\nUser=your_username\nGroup=your_group\n\n### 修复命令：添加绑定地址和正确端口\n\nExecStart=二进制程序的绝对路径\n\n### 重启策略\n\nRestart=on-failure\nRestartSec=5s\n\n### 安全限制（可选）\n\nNoNewPrivileges=yes\nPrivateTmp=yes\n\n[Install]\nWantedBy=multi-user.target\n\n---\n\n保存配置之后\n\nsudo systemctl daemon-reload（重载配置信息）\n\nsudo systemctl start 服务名\n\nsudo systemctl status 服务名\n\n正常情况下就可以正常运行了\n\nsudo systemctl enable 服务名\n\n开机自动启动\n\n---\n\n## lsof命令可以查找进程\n\nlsof filename 显示打开指定文件的所有进程\n\nlsof -a 表示两个参数都必须满足时才显示结果\n\nlsof -c string 显示COMMAND列中包含指定字符的进程所有打开的文件\n\nlsof -u username 显示所属user进程打开的文件\n\nlsof -g gid 显示归属gid的进程情况\n\nlsof +d /DIR/ 显示目录下被进程打开的文件\n\nlsof +D /DIR/ 同上，但是会搜索目录下的所有目录，时间相对较长\n\nlsof -d FD 显示指定文件描述符的进程\n\nlsof -n 不将IP转换为[hostname](https://baike.baidu.com/item/hostname/812870?fromModule=lemma_inlink)，缺省是不加上-n参数\n\nlsof -i 用以显示符合条件的进程情况\n\nlsof -i[46] [protocol][@[host](https://baike.baidu.com/item/host/3758959?fromModule=lemma_inlink)name|hostaddr][:service|port]\n\n46 --＞ IPv4 or [IPv6](https://baike.baidu.com/item/IPv6/172297?fromModule=lemma_inlink)\n\nprotocol --＞ TCP or [UDP](https://baike.baidu.com/item/UDP/571511?fromModule=lemma_inlink)\n\nhostname --＞ Internet host name\n\nhostaddr --＞ [IPv4地址](https://baike.baidu.com/item/IPv4%E5%9C%B0%E5%9D%80/16742558?fromModule=lemma_inlink)\n\nservice --＞ /etc/service中的 service name (可以不只一个)\n\nport --＞ [端口号](https://baike.baidu.com/item/%E7%AB%AF%E5%8F%A3%E5%8F%B7/10883658?fromModule=lemma_inlink) (可以不只一个)\n\nlsof -i :4000\n\n查找端口号为4000的进程服务\n\n## kill可以杀死进程\n\n-l  信号，若果不加信号的编号参数，则使用“-l”参数会列出全部的信号名称\n\n-a  当处理当前进程时，不限制命令名和进程号的对应关系\n\n-p  指定kill 命令只打印相关进程的进程号，而不发送任何信号\n\n-s  指定发送信号\n\n-u  指定用户\n\nkill 9 \\<PID\\>\n\n杀死进程号为pid的进程\n\nhexo\n\n[Unit]\n\nDescription=Hexo Blog Server\n\nAfter=network.target\n\n[Service]\n\n# 使用专用用户\n\nUser=root\n\n# 设置环境变量\n\nEnvironment=\"NODE_ENV=production\"\n\nEnvironment=\"PATH=/usr/nodejs/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin\"\n\n# 工作目录和启动命令\n\nWorkingDirectory=/usr/blog\n\nExecStart=/usr/nodejs/bin/hexo server -p 80  # 改用高位端口\n\n# 重启策略\n\nRestart=always\n\nRestartSec=5\n\nStartLimitIntervalSec=60\n\nStartLimitBurst=3\n\n# 安全设置\n\nNoNewPrivileges=yes\n\nPrivateTmp=yes\n\n[Install]\n\nWantedBy=multi-user.target\n\nim\n\n[Unit]\n\nDescription=Hexo Image Server\n\nAfter=network.target\n\n[Service]\n\n# 指定工作目录（图片所在目录）\n\nWorkingDirectory=/usr/blog/source/_data/images\n\n# 使用普通用户（非root更安全）\n\nUser=hexouser\n\n# 修复命令：添加绑定地址和正确端口\n\nExecStart=/usr/bin/python3 -m http.server --bind 0.0.0.0 65532\n\n# 重启策略\n\nRestart=on-failure\n\nRestartSec=5s\n\n# 安全限制（可选）\n\nNoNewPrivileges=yes\n\nPrivateTmp=yes\n\n[Install]\n\nWantedBy=multi-user.target","categories":["知识"]},{"title":"paste靶机","url":"/2025/09/28/paste靶机/","content":"\n# paste靶机\n\n## 端口信息\n\n先扫一下端口\n\n![2025-08-05-15-57-50-image](2025-08-05-15-57-50-image.png)\n\n主要是http和ftp可能有用\n\n看到ftp的banner信息里面有一个guest:gu\n\n提示我们用这个账号\n\n但是这个banner信息可能不完整\n\n我们去ftp先登录一下\n\n## ftp\n\n![2025-08-05-16-01-21-image](2025-08-05-16-01-21-image.png)\n\n提示我们用guest:guest登陆\n\n我们这里直接用这个账号去登录ssh试试\n\n## ssh\n\n![2025-08-05-16-03-25-image](2025-08-05-16-03-25-image.png)\n\n直接登上去了\n\n看看home目录有没有flag\n\n发现什么都没有\n\n![2025-08-05-16-04-13-image](2025-08-05-16-04-13-image.png)\n\n还有一个film用户\n\n我们看看/etc/passwd有没有什么信息\n\n里面也没有什么有用信息\n\n## http\n\n![2025-08-05-16-05-51-image](2025-08-05-16-05-51-image.png)\n\n打开页面\n\n关于描述貌似是一个密码生成器\n\n我们点一下产生密码\n\n猜测这个就是film账号的密码\n\n![2025-08-05-16-07-07-image](2025-08-05-16-07-07-image.png)\n\n成功登录film账号\n\n拿完flag看看有什么命令可以执行\n\n![2025-08-05-16-07-58-image](2025-08-05-16-07-58-image.png)\n\n有个paste命令可以用\n\n去网上查查这个命令有什么用\n\n最后发现paste可以直接读取文件\n\n于是root用户没必要登录 可以直接读取任意文件\n\n![2025-08-05-16-09-21-image](2025-08-05-16-09-21-image.png)\n\n---\n","categories":["靶机"]},{"title":"monitor靶机","url":"/2025/09/28/monitor靶机/","content":"\n# monitor靶机\n\n## 端口信息\n\n搜索端口信息\n\n![1](1.png)\n\n有个web服务\n\n## web网页\n\n访问过去是一个登录框\n\n![2](2.png)\n\n随便尝试几个密码\n\nadmin:admin登进去\n\n发现没有可以用的点\n\n就是个静态页面\n\n用Tscan工具爆破一下目录\n\n![3](3.png)\n\n找到zabbix的后台页面\n\n![4](4.png)\n\n网上搜索一下zabbix的默认密码\n\n找到Admin:zabbix\n\n成功登录\n\n![5](5.png)\n\n在这个后台找了一下功能点\n\n有一个文件上传和一个执行脚本\n\n一开始一直在尝试文件上传\n\n发现并没有漏洞点\n\n来到执行脚本这里\n\n![6](6.png)\n\n我们把命令改成弹shell\n\n然后执行命令\n\n点击ping\n\n![7](7.png)\n\n![8](8.png)\n\n成功拿到shell\n\n![9](9.png)\n\n切到home目录有个hyh账号\n\n成功拿到user的flag\n\n## root\n\n查找可以以sudo执行的命令\n\n![10](10.png)\n\n并没有可以执行的命令\n\n这里直接去找hyh的密码\n\n通过一顿翻找\n\n最后在配置文件中发现不知道是什么账号的密码\n\n![11](11.png)\n\n![12](12.png)\n\n尝试密码 发现是hyh的密码\n\n![13](13.png)\n\n看看这个账号有没有可以以sudo执行的命令\n\n![14](14.png)\n\n有一个mount命令\n\n查找有关信息\n\n发现我们可以挂载文件\n\n于是\n\n`sudo mount -o /bin/bash /bin/mount`\n\n`sudo mount`\n\n拿到root权限\n\n![15](15.png)\n","categories":["靶机"]},{"title":"mayuri靶机","url":"/2025/09/28/mayuri靶机/","content":"\n# Mayuri靶机\n\n## 端口信息\n\n先扫一下端口信息\n\n![1](1.png)\n\n开了2个web服务\n\n## http\n\n先看看80端口\n\n是一个查询价格的网站\n\n![2](2.png)\n\n输入数字编号会回显数据\n\n![3](3.png)\n\n试试输入别的东西看看回显情况\n\n![4](4.png)\n\n输入字母回显了报错信息\n\n我们把报错信息给ai帮我们看看这是什么数据库\n\n![5](5.png)\n\n是cypher数据库\n\n在网上搜一下有关这个数据库的注入方法\n\nhttps://blog.csdn.net/Che_ng/article/details/145965471https://blog.csdn.net/Che_ng/article/details/145965471\n\n找到这篇文章写了有关cypher注入的内容\n\n![6](6.png)\n\n先丢了一个测试的payload\n\n成功回显所以道具的价格\n\n那么就可以确认确实有注入漏洞\n\n这个时候我们别忘了再去看看那个8080端口web服务是干什么的\n\n![7](7.png)\n\n是一个登录框 猜测80端口可以爆出来我们想要的账号密码\n\n回到80端口 爆出节点标签\n\n![8](8.png)\n\n确认节点标签有个User\n\n那么直接爆这个节点的数据就行\n\n![9](9.png)\n\n最后得到账号密码\n\nOOOkkkaaabbbeee:Okabe\n\n![10](10.png)\n\n登进去直接有命令行可以用了 直接弹shell登上去看看\n\n## ssh\n\n![11](11.png)\n\n![12](12.png)\n\n成功登上去\n\nhome目录有个kyoma的账户\n\n直接先读取user的flag 看看user.txt有没有读的权限\n\n![13](13.png)\n\n这里kyoma文件夹没法被读取 但是可以被执行 文件也刚好可以被读\n\n这里刚好就直接读出来了 也是比较凑巧的\n\n## root\n\n经过一顿翻找并没有什么可用的东西\n\n最后在环境变量中找到疑似密码的数字\n\n![14](14.png)\n\n根据之前web网页上面的内容可以知道这个靶机neta了命运石之门\n\n看过命运石之门的都知道1.129848这个数值就是世界线变动率\n\n其实没看过的话 pass这个也应该想到可能是password\n\n我们用这个密码登上去试试\n\n![15](15.png)\n\n成功登录kyoma的账号\n\n我们看看有没有可以用的命令\n\n![16](16.png)\n\n并没有可以用的命令\n\n我们再去找找有suid的命令\n\n![17](17.png)\n\n发现叫TimeMachine的程序有suid 还就在home目录下\n\n其home目录下还有邮件\n\n![172](172.png)\n\n邮件内容提示我们要去使用时间机器\n\n![173](173.png)\n\n使用完之后一开始并没有什么特别的变化\n\n多次使用后发现那个时间戳一直和真实时间是同步的\n\n猜测可能调用了什么命令\n\n把TimeMachine拿到ida里面看看\n\n![18](18.png)\n\n发现在这个函数里面有调用一个命令\n\n![19](19.png)\n\n调用了timedatectl这个命名\n\n那么提权思路就清楚了\n\n我们构造一个同名的timedatectl命令 但是实际上是bash 然后把这个同名的timedatectl命令的路径的优先级排到最前面 使得我们自己构造的同名的timedatectl命令被优先执行\n\n直接写一个shell脚本拿root\n\n![21](21.png)\n\n在改一下这个shell脚本的权限然后执行就可以拿到root了\n\n![22](2.png)\n\n这里的shell是个哑shell 没有交互 但是没有大碍\n\n![23](23.png)\n\n最后拿到root的flag\n\n---\n\n# 关于环境变量提权\n\n主要来自于这篇文章\n\n[Linux-环境变量提权 - 1vxyz - 博客园](https://www.cnblogs.com/1vxyz/articles/17659773.html)\n\n命名的执行是根据环境变量中的目录去寻找命令的\n\n简单来说通过环境变量去提权 就是劫持命令 去执行我们自己构造的同名命令\n\n从而提权\n\n当然前提是这个最开始执行的命令是有suid的\n\n## suid\n\n是一种linux中特殊权限\n\n允许命令可以暂时以特殊权限去执行此命令\n\n可以通过\n\n`find / -type f -perm -4000 2>/dev/null`\n\n来寻找这类命令\n","categories":["靶机"]},{"title":"资产收集","url":"/2025/09/28/资产收集/","content":"\n本人因为是学生所以主要挖的是edusrc\n\nedusrc的审核感觉也是比较快的（现在的速度基本上是一天一审）\n\n## 资产收集\n\n大部分情况挖洞都是在屏幕前点来点去\n\n过程也是相当的枯燥\n\n出货的时刻总是占一小部分\n\n一天没找到或者是没通过都是正常的\n\n所以找对一个好的资产收集方式可以大大的节约我们的时间\n\n以下讲的都是个人觉得比较高效的\n\n一些比较复杂的就不做推荐了\n\n---\n\n## 从域名下手\n\n因为挖的是edu的\n\n所以基本上所有学校都在范围之内\n\n每个学校基本都有一个主域名\n\n如果想一天就猛猛干一个大学的话\n\n可以试试在小蓝本或者爱企查上面先搜集一手学校信息\n\n然后使用一些域名爆破的工具\n\nsubfinder one for all等\n\n或者可以使用一些被动搜集域名的工具\n\nfofa hunter 360等网络空间资产引擎\n\n---\n\n## 从fofa的title下手\n\n说实话从域名下手的话还是太大众化了（如果就想挖证书大学的话还是要先仔细搜集一下绝大部分域名的）\n\n而且大部分都被搞过了\n\n除非有一些新上线的资产可以细细挖掘一手\n\n如果从域名下手的话确实资产无一例外都是学校的\n\n除非是新资产 不然大概率已经被干过了\n\n本人也是比较懒的那种所以就喜欢用**fofa**之类\n\n本人自认为从fofa或者hunter这类的网络空间资产引擎上面通过title去搜索大学资产是比较快捷的且高效的\n\n就拿fofa举例\n\ntitle=\"xx大学\"\n\n![2025-09-23-23-15-35-image](2025-09-23-23-15-35-image.png)\n\nfofa这些都是通过爬虫去爬取网站信息\n\n每天通过fofa搜集到的信息都不同\n\n有一定概率就找到了以往都没被人找到过的资产或者就是学校的新资产\n\n这样搜集的话有部分的网站可能就不是学校资产的\n\n有些是一眼就可以出来的\n\n有些的话是存疑就可以去试试看\n\n**现在本人挖到的证书都是直接通过title=\"xx大学\"的方式找到的**\n\n---\n\n## 从教育网段下手\n\n大部分资产其实就没发直接通过域名去搜集\n\n一些就是内部人员用的就不会去绑一个域名\n\n所以这个时候通过网段就是比较好的方法\n\nfofa的话就直接先随便搜一个学校然后点一下组织那里就可以了\n\n![2025-09-23-23-16-28-image](2025-09-23-23-16-28-image.png)\n\n教育网段配上title就可以开始一天的挖洞之旅了（笑）\n\n---\n\n## 从icon下手\n\n被用烂的框架都有一个固定的favicon\n\n我们可以把favicon下下来然后放到这个网站上\n\n![2025-09-23-23-20-27-image](2025-09-23-23-20-27-image.png)\n\n就可以得到favicon的MD5或者是hash\n\n然后通过icon_hash=\"\"的语法去搜集使用这个框架的网站\n\n一些常用的框架都有一些弱密码\n\n要是闲着没事干又不想认真挖 就可以直接找个框架的favicon然后开启一天的挖洞之旅了(笑)\n\n![83F007C8A1389B273ABA2C2ED1A090FF](83F007C8A1389B273ABA2C2ED1A090FF.gif)\n\n---\n\n## 叠甲环节\n\n文章来自作者日常积累，未经许可严禁转载，转载需联系本人。文中内容仅限学习交流，严禁用于商业及非法用途，涉及网络安全相关未经授权不得测试，违规使用后果自负，与作者及本文无关 。（都别乱搞哈）\n","categories":["挖洞"]},{"title":"test","url":"/2025/09/23/test/","content":"\n![1](1.png)\n"}]